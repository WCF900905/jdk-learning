# JDK10新特性

## 局部变量类型推断

现在有var声明。它允许开发者在不指定其类型的情况下声明局部变量。变量的类型将从创建的实际对象的类型中推断出来。它被称为是 JDK 10 中开发人员唯一真正使用到的功能

## 并行全垃圾回收器G1

Java10为G1引入多线程并行GC，同时会使用与年轻代回收和混合回收相同的并行工作线程数量，从而减少了Full
GC的发生，以带来更好的性能提升，更大的吞吐量。Java中将采用并行化mark-sweep-compact算法，并使用与年轻代回收和混合回收相同数量的线程。具体并行线程数量可以通过: -XX:ParallelGCThreads
参数来调节，但是这也会影响用于年轻代和混合收集的工作线程数量。

## 垃圾收集器接口

在Java10之前，GC回收的组件散落在代码的各个部分。尽管这些管理对于使用GC计划的JDK开发者来说比较熟悉，但对于新的开发人员来说，对于在哪里查找到特定的GC代码或者实现一个新的垃圾收集器，还是感到繁琐。
为解决此问题，需要整合并清理GC接口，以便更容易实现新的GC，并更好的维护现有的GC。在Java10当中 引入一个干净的 GC 接口，改进不同 GC 源代码的隔离性，多个 GC 之间共享的实现细节代码应该存在于辅助类中。

## 备用存储上的堆分配

Java10将使得JVM能够适用于不同类型的存储机制的堆，在可选内存设备上进行堆内存分配。要在这样的备用设备上进行堆分配，可以使用堆分配参数-XX:AllocateHeapAt = <path>
，这个参数将指向文件系统的文件并使用内存映射来达到在备用存储设备上进行堆分配的预期结果

## 应用程序类数据共享

在Java5中就已经引入了
类数据共享机制简称CDS，允许将一组类预处理为共享归档文件，以便在运行时能够进行内存映射以减少Java程序的启动时间，当多个Java虚拟机共享相同的归档文件时，还可以减少动态内存的占用量，同时减少多个虚拟机在同一个物理虚拟机的资源占用。CDS的特性在原来的bootstrap类基础上，扩展了应用类的CDS支持，原理为:
在启动时记录加载类的过程，写入到文本文件中，再次启动时直接读取此启动文本并加载，如果应用环境没有大的变化，启动速度就会得到提升。

## 局部线程管控 ThreadLocalHandShakes

在已有的Java版本中，JVM线程只能全部启用或者停止，没法对单独某个线程的操作。

Java10中线程管控引入JVM安全点的概念，将允许在不运行全局JVM安全点的情况下实现线程回调，这种方式使得单独停止某个线程变得可能。

显示的提高了现有的JVM性能开销。

增加的参数为：-XX:ThreadLocalHandshakes (默认为开启)

## 新增API

- Optional.orElseThrow()    orElseThrow类中添加了一个新方法Optional。它是现有方法的同义词，现在是现有方法的首选替代get方法。
- List.copyOf, Set.copyOf, 和Map.copyOf 这些方法从现有实例创建新的集合实例。
- Collectors.toUnmodifiableList, Collectors.toUnmodifiableSet,Collectors.toUnmodifiableMap 这些方法允许将 a
  的元素Stream收集到不可修改的集合中

  